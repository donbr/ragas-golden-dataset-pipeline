# Knowledge Graph Visualization

This document provides detailed information about visualizing knowledge graphs generated by the RAGAS Golden Dataset Pipeline.

## Overview

The RAGAS knowledge graph contains entities and relationships extracted from your documents. It represents the structured information that forms the basis of the evaluation dataset. Visualizing this graph can provide valuable insights into the relationships between concepts, questions, answers, and sources.

![Knowledge Graph Example](../output/kg_visualization.png)

## Visualization Tools

The pipeline includes several utilities for visualizing and analyzing knowledge graphs:

1. `ragas_kg_visualization.py` - Creates interactive HTML or static PNG visualizations
2. `analyze_kg.py` - Provides comprehensive graph analysis with metrics
3. `remove_embeddings.py` - Reduces file size for better visualization performance

## Basic Visualization

### Interactive HTML Visualization

```bash
# Generate an interactive HTML visualization of the full knowledge graph
python utilities/ragas_kg_visualization.py --input output/kg.json --output output/kg_visualization.html
```

This creates an HTML file with an interactive network graph that you can:
- Zoom in/out to explore different graph regions
- Hover over nodes to see entity details
- Filter by node types to focus on specific entities
- Search for particular entities or relationships

### Static PNG Visualization

```bash
# Generate a static PNG visualization
python utilities/ragas_kg_visualization.py --input output/kg.json --output output/kg_visualization.png --static
```

This creates a PNG image that can be easily shared in documentation or presentations.

### Optimized Visualization

For better performance, especially with large knowledge graphs, it's recommended to first remove embeddings:

```bash
# Remove embeddings from the knowledge graph
python utilities/remove_embeddings.py --input output/kg.json --output output/kg_no_embeddings.json

# Visualize the version without embeddings
python utilities/ragas_kg_visualization.py --input output/kg_no_embeddings.json --output output/kg_no_embeddings_visualization.html
```

## Advanced Analysis

For more detailed analysis of the knowledge graph:

```bash
# Run comprehensive analysis
python utilities/analyze_kg.py --input output/kg.json --output-dir output/analysis_results
```

This will create a directory with multiple analysis outputs including:
- Network metrics (centrality, connectivity, clustering)
- Node and edge statistics
- Distribution of entity types
- Community detection results
- Multiple visualization formats

## Knowledge Graph Structure

The knowledge graph typically contains:

- **Nodes (Entities)**: 
  - Concepts from the documents
  - Questions generated about the concepts
  - Answers to those questions
  - Facts extracted from the documents
  - Sources (document references)

- **Edges (Relationships)**:
  - Contains: Indicates inclusion relationships
  - RelatesTo: Connects conceptually related entities
  - AnsweredBy: Links questions to answers
  - ExtractedFrom: Connects facts/concepts to sources
  - And other domain-specific relationships

## Sample Knowledge Graph Statistics

From a typical run with 10 test samples:
- Nodes: ~80-120 (entities from your documents)
- Edges: ~300-400 (relationships between entities)
- Node types: Concepts, Questions, Answers, Facts, Sources
- Edge types: Contains, RelatesTo, AnsweredBy, ExtractedFrom, etc.

## File Size Considerations

Knowledge graph files can be quite large due to embedded vector representations. Some typical file sizes:

- Full knowledge graph (`kg.json`): ~10-20 MB
- Knowledge graph without embeddings (`kg_no_embeddings.json`): ~1-2 MB
- HTML visualization: ~2-5 MB
- PNG visualization: ~100-500 KB

## Customizing Visualizations

The visualization tools accept several parameters to customize the output:

```bash
# Custom node colors and sizes
python utilities/ragas_kg_visualization.py \
  --input output/kg.json \
  --output output/custom_visualization.html \
  --node-size 10 \
  --edge-width 2 \
  --concept-color "#3498db" \
  --question-color "#2ecc71" \
  --answer-color "#e74c3c"

# Filtering specific node types
python utilities/ragas_kg_visualization.py \
  --input output/kg.json \
  --output output/filtered_visualization.html \
  --include-types Concept,Question,Answer \
  --exclude-types Source
```

For more information on available visualization options, see the [utilities/README_KG_UTIL.md](../utilities/README_KG_UTIL.md) file. 